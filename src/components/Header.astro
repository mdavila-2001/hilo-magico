---
// src/components/Header.astro

// Navegación
const enlaces = [
  { texto: 'Inicio', url: '/' },
  { texto: 'Catálogo', url: '/catalog' },
  { texto: 'Servicios', url: 'services' },
  { texto: 'Galería', url: 'gallery' },
  { texto: 'Contacto', url: 'contact' },
];

// El estado del menú se manejará con JavaScript en el cliente
---

<script>
  // Script que se ejecutará en el cliente
  document.addEventListener('DOMContentLoaded', () => {
    const menuBtn = document.querySelector('.header__menu-btn');
    const menu = document.querySelector('.header__nav');
    
    if (menuBtn && menu) {
      // Cerrar menú al hacer clic en un enlace
      document.querySelectorAll('.header__enlace').forEach(enlace => {
        enlace.addEventListener('click', () => {
          menuBtn.setAttribute('aria-expanded', 'false');
          menu.classList.remove('header__nav--activo');
        });
      });
    }
  });
</script>

<header class="header">
  <div class="contenedor header__contenedor">
    <!-- Logo -->
    <a href="/" class="header__logo" aria-label="Hilo Mágico - Inicio">
      <img src="/img/logo-hilo-magico.svg" alt="Hilo Mágico" width="180" height="60" />
    </a>
    
    <!-- Navegación principal -->
    <nav 
      class="header__nav" 
      id="menu-principal" 
      aria-label="Navegación principal"
    >
      <ul class="header__menu">
        {enlaces.map((enlace) => (
          <li class="header__menu-item">
            <a 
              href={enlace.url} 
              class="header__enlace"

            >
              {enlace.texto}
            </a>
          </li>
        ))}
      </ul>
    </nav>

    <!-- Botones de la derecha (carrito y menú móvil) -->
    <div class="header__acciones">
      <!-- Botón del carrito -->
      <button 
        class="header__carrito-btn" 
        aria-label="Carrito de compras"
        aria-expanded="false"
        aria-controls="carrito"
        onclick="document.getElementById('carrito').classList.toggle('carrito--activo'); this.setAttribute('aria-expanded', document.getElementById('carrito').classList.contains('carrito--activo'));"
      >
        <i class="fas fa-shopping-cart" aria-hidden="true"></i>
        <span class="header__carrito-contador" id="contador-carrito">0</span>
        <span class="sr-only">Ver carrito</span>
      </button>

      <!-- Botón del menú móvil -->
      <button 
        class="header__menu-btn" 
        aria-label="Menú de navegación"
        aria-expanded="false"
        aria-controls="menu-principal"
        onclick="document.getElementById('menu-overlay').classList.toggle('header__overlay--active'); document.getElementById('menu-principal').classList.toggle('header__nav--activo'); this.setAttribute('aria-expanded', document.getElementById('menu-principal').classList.contains('header__nav--activo'));"
      >
        <span class="header__menu-icon"></span>
        <span class="sr-only">Menú de navegación</span>
      </button>
    </div>

    <!-- Overlay para el menú móvil -->
    <div 
      id="menu-overlay" 
      class="header__overlay"
      onclick="document.querySelector('.header__menu-btn').click()"
    ></div>
  </div>
  
  <!-- Carrito desplegable -->
  <div class="carrito" id="carrito">
    <div class="carrito__encabezado">
      <h3>Tu Carrito</h3>
      <button class="carrito__cerrar" aria-label="Cerrar carrito">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="carrito__contenido" id="lista-carrito">
      <p class="carrito__vacio">Tu carrito está vacío</p>
    </div>
    <div class="carrito__total">
      <p>Total: <span id="total">$0.00</span></p>
      <button class="carrito__comprar" id="vaciar-carrito">Vaciar Carrito</button>
      <button class="carrito__comprar" id="procesar-pago">Proceder al Pago</button>
    </div>
  </div>
</header>

<!-- Los estilos están en /src/styles/components/_header.scss -->
