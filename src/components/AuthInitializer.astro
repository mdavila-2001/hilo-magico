---
// Este componente se encarga de inicializar el estado de autenticación
// Debe colocarse en el layout principal
---

<script>
  import { useAuthStore } from '../stores/authStore';
  
  // Inicializar el estado de autenticación al cargar la página
  if (typeof window !== 'undefined') {
    // Verificar si hay un token en localStorage
    const token = localStorage.getItem('auth-storage');
    
    if (token) {
      try {
        const authData = JSON.parse(token);
        if (authData.state?.accessToken) {
          // Aquí podrías hacer una petición para verificar el token
          // y actualizar los datos del usuario si es necesario
          console.log('Usuario autenticado:', authData.state.user);
        }
      } catch (error) {
        console.error('Error al parsear datos de autenticación:', error);
        // Limpiar datos inválidos
        localStorage.removeItem('auth-storage');
      }
    }
  }
</script>
